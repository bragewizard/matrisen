---
draft: false 
date: 2024-02-08
categories:
    - devlog
---

### Week 2 2024

## Monday 

We mounted the SD-CARD! We originally attempted to mount it manually, before realizing that MPLAB had the feature of mounting it automatically, which we mentioned on the dev-log for last week. 
It is possible that the automatic procedure by the compiler and our manual way of doing it cancelled eachother out, which we only have ourselves to blame. 3 hours of work later, we were able to mount the
SD-Card successfully. Another hour of tinkering, we were able to write to the SD-Card. We suspect this is a point where the last "flight-computer" team were stuck, because you had to flush the changes
for it to be applied to the SD-Card. This feature although frustrating if you miss it at first, is actually very intuivitive, as we have the ability to flush the card ONLY when we know the data is completely written, else it could lead to catastrophy when trying
to read the data again in case of a system reboot. 

With that being said, we have more work to do with the SD-Card moving forward. The next steps are to design the format and procedure to write and read data 
consistently, and to write pseudo-code outlining the structure of the state machine. 

## Data format wants and needs: 

- One file for raw data
- One file for data after passing through Kalman-Filter
- Write and read at appropiate size and times 
- Only write data we know is complete, as to not create data outside of specificed format


It is important to stick to these guidelines. I really want to underline how bad it would be if the data got off track, it needs to be precise as to avoid miscalculations.

## State machine

- Rigid and consistent
- Easy logic to follow
- Clear LED indicators that describes what stage we are at


We will create rough diagrams to visualize the data format, and hopefully agree on a design by the next couple of days, as well as write pseduo code for the state machine. 


## Rest of week

Completed pseudo code for the state machine, very general so far but managed to narrow down the different states we need. Got the magnetometer up and running, with successfull output thursday evening.
The output seemed to roughly match with whats expeceted, with its x, y, z values corresponding well to when the board is turned. To end the week of we put in additional work on the Kalman Filter, as well
as sensor-code cleanup and documentation.

    



